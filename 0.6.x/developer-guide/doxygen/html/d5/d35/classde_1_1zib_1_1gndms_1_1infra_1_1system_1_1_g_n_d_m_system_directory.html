<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>GNDMS: de.zib.gndms.infra.system.GNDMSystemDirectory Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../gndms-logo-150x120.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">GNDMS&#160;<span id="projectnumber">0.6.0</span></div>
   <div id="projectbrief">RESTful verison of GNDMS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>de</b>      </li>
      <li class="navelem"><b>zib</b>      </li>
      <li class="navelem"><b>gndms</b>      </li>
      <li class="navelem"><a class="el" href="../../d2/d1d/namespacede_1_1zib_1_1gndms_1_1infra.html">infra</a>      </li>
      <li class="navelem"><b>system</b>      </li>
      <li class="navelem"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html">GNDMSystemDirectory</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pac-methods">Package Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a>  </div>
  <div class="headertitle">
<h1>de.zib.gndms.infra.system.GNDMSystemDirectory Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="de::zib::gndms::infra::system::GNDMSystemDirectory" --><!-- doxytag: inherits="de::zib::gndms::infra::system::SystemDirectory,org::springframework::beans::factory::BeanFactoryAware" -->
<p>ThingAMagic.  
<a href="#_details">More...</a></p>
<div class="dynheader">
Inheritance diagram for de.zib.gndms.infra.system.GNDMSystemDirectory:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.png" usemap="#de.zib.gndms.infra.system.GNDMSystemDirectory_map" alt=""/>
  <map id="de.zib.gndms.infra.system.GNDMSystemDirectory_map" name="de.zib.gndms.infra.system.GNDMSystemDirectory_map">
<area href="../../de/dbe/interfacede_1_1zib_1_1gndms_1_1infra_1_1system_1_1_system_directory.html" alt="de.zib.gndms.infra.system.SystemDirectory" shape="rect" coords="171,56,503,80"/>
<area href="../../da/d8a/interfacede_1_1zib_1_1gndms_1_1logic_1_1model_1_1gorfx_1_1_quote_calculator_provider.html" alt="de.zib.gndms.logic.model.gorfx.QuoteCalculatorProvider" shape="rect" coords="0,0,332,24"/>
<area href="../../d6/dbd/interfacede_1_1zib_1_1gndms_1_1logic_1_1access_1_1_task_action_provider.html" alt="de.zib.gndms.logic.access.TaskActionProvider" shape="rect" coords="342,0,674,24"/>
</map>
 </div></div>

<p><a href="../../d8/df0/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&lt; T &gt; T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a09f09716d825315d19c0edb9b7fa086d">waitForInstance</a> (@NotNull Class&lt; T &gt; clazz,@NotNull String name)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits until an instance on <a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b">instances</a> with the key <code>name</code>, has been registered and returns it.  <a href="#a09f09716d825315d19c0edb9b7fa086d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a507bae587ac40cd826130d9d85ad17ed"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::addInstance" ref="a507bae587ac40cd826130d9d85ad17ed" args="(@NotNull String name,@NotNull Object obj)" -->
synchronized void&#160;</td><td class="memItemRight" valign="bottom"><b>addInstance</b> (@NotNull String name,@NotNull Object obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">synchronized&lt; T &gt; T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#aadcef6725ccb81856e773b9ca3a69084">getInstance</a> (@NotNull Class&lt;?extends T &gt; clazz,@NotNull String name)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the instance, which has been registered on <a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b">instances</a> with the name <code>name</code>.  <a href="#aadcef6725ccb81856e773b9ca3a69084"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a884d362291751b676c7e09c31af216f1">reloadConfiglets</a> (final EntityManagerFactory emf)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new EntityManager using <code>emf</code>.  <a href="#a884d362291751b676c7e09c31af216f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4fa838ce7307811feb79d9233b111263"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::getSystemName" ref="a4fa838ce7307811feb79d9233b111263" args="()" -->
String&#160;</td><td class="memItemRight" valign="bottom"><b>getSystemName</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#acfaf27e672319e78e588b59e8c3bbea1">getSystemTempDirName</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value set for the environment variable <code>GNDMS_TMP</code>.  <a href="#acfaf27e672319e78e588b59e8c3bbea1"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pac-methods"></a>
Package Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a20ac5e3bb397a100ed48a136a5715e31"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::init" ref="a20ac5e3bb397a100ed48a136a5715e31" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>init</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a49182c22d433229da953d0d53aebba13"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::shutdownConfiglets" ref="a49182c22d433229da953d0d53aebba13" args="()" -->
synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a49182c22d433229da953d0d53aebba13">shutdownConfiglets</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Shuts down all configlets stored in the <a class="el" href="../../">configlets</a> map. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&lt; T extends Configlet &gt; T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#af9d216faf1c822254414ffe6ed9cefde">getConfiglet</a> (final @NotNull Class&lt; T &gt; clazz, final @NotNull String name)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the configlet stored with the key <code>name</code> from <a class="el" href="../../">configlets</a> map, casts it to a <code>T</code> class and returns it.  <a href="#af9d216faf1c822254414ffe6ed9cefde"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#afc33691597119dcd8f690a4e65895eda">addInstance_</a> (final String name, final Object obj)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds an instance to the <a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b">instances</a> map.  <a href="#afc33691597119dcd8f690a4e65895eda"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">synchronized <a class="el" href="../../d1/d8c/classde_1_1zib_1_1gndms_1_1model_1_1common_1_1_configlet_state.html">ConfigletState</a>[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a301cf44ee01fb0f1591cbb9d736da7de">loadConfigletStates</a> (final EntityManager emParam)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads all <code>ConfigletStates</code> managed by a specific <code>EntityManager</code> into an array.  <a href="#a301cf44ee01fb0f1591cbb9d736da7de"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#aa9111f40b37ba912b65a77133a23ffcf">createOrUpdateConfiglets</a> (final <a class="el" href="../../d1/d8c/classde_1_1zib_1_1gndms_1_1model_1_1common_1_1_configlet_state.html">ConfigletState</a>[] statesParam)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterates through the <code>ConfigletState</code> array and either updates the <code>state</code> of the corresponding <code>Configlet</code>, if already stored in the <a class="el" href="../../">configlets</a> map, or creates a new <code>Configlet</code> using <a class="el" href="../../">createConfiglet(de.zib.gndms.model.common.ConfigletState)</a> and stores it together with the name of the Configlet in the map.  <a href="#aa9111f40b37ba912b65a77133a23ffcf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">synchronized Configlet&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#aa0ca003c94fd752c7f1dade875a5b882">createConfiglet</a> (final <a class="el" href="../../d1/d8c/classde_1_1zib_1_1gndms_1_1model_1_1common_1_1_configlet_state.html">ConfigletState</a> configParam)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <code>Configlet</code> out of a ConfigletState.  <a href="#aa0ca003c94fd752c7f1dade875a5b882"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a0af2e32c7905bb87d0942cc5722d3079">shutdownOldConfiglets</a> (final EntityManager emParam)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes old configlets from the <a class="el" href="../../">configlets</a> map.  <a href="#a0af2e32c7905bb87d0942cc5722d3079"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a25a0d7e581426c99b96593d2832c973d"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::logger" ref="a25a0d7e581426c99b96593d2832c973d" args="" -->
final Logger&#160;</td><td class="memItemRight" valign="bottom"><b>logger</b> = LoggerFactory.getLogger(GNDMSystemDirectory.class)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adcdc6d5aeef28b0db715db9e561353ce"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::systemName" ref="adcdc6d5aeef28b0db715db9e561353ce" args="" -->
String&#160;</td><td class="memItemRight" valign="bottom"><b>systemName</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f582a59bdd5364e415a30d9c234b77b"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::instances" ref="a9f582a59bdd5364e415a30d9c234b77b" args="" -->
final Map&lt; String, Object &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b">instances</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">stores several instances needed for the <code><a class="el" href="../../da/d1d/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system.html" title="This sets up the configuration and database storage area shared between GNDMS services.">GNDMSystem</a></code> <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a83a832396c70ac65e19d48a541584f4f"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::configlets" ref="a83a832396c70ac65e19d48a541584f4f" args="" -->
final Map&lt; String, Configlet &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>configlets</b> = ( new MapMaker() ).makeMap()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2cc240c24feef3b87c20ee5cd60fc6e0"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::boundInjector" ref="a2cc240c24feef3b87c20ee5cd60fc6e0" args="" -->
final BoundInjector&#160;</td><td class="memItemRight" valign="bottom"><b>boundInjector</b> = new BoundInjector()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad18a7627af27c0b1a06c962eb80a80c0"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::injector" ref="ad18a7627af27c0b1a06c962eb80a80c0" args="" -->
GNDMSInjector&#160;</td><td class="memItemRight" valign="bottom"><b>injector</b></td></tr>
<tr><td colspan="2"><h2><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a978086885dc0782289112fc4b9c6da6a"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::INITIAL_CAPACITY" ref="a978086885dc0782289112fc4b9c6da6a" args="" -->
static final int&#160;</td><td class="memItemRight" valign="bottom"><b>INITIAL_CAPACITY</b> = 32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa6578f3334a7ac3734b7aed6440dfdf0"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::INSTANCE_RETRIEVAL_INTERVAL" ref="aa6578f3334a7ac3734b7aed6440dfdf0" args="" -->
static final long&#160;</td><td class="memItemRight" valign="bottom"><b>INSTANCE_RETRIEVAL_INTERVAL</b> = 250L</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>ThingAMagic. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="../../da/d1d/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system.html" title="This sets up the configuration and database storage area shared between GNDMS services.">GNDMSystem</a> </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>try ste fan pla nti kow zib </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>$Id$</dd></dl>
<p>User: stepn Date: 03.09.2008 Time: 16:50:06 </p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="afc33691597119dcd8f690a4e65895eda"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::addInstance_" ref="afc33691597119dcd8f690a4e65895eda" args="(final String name, final Object obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void de.zib.gndms.infra.system.GNDMSystemDirectory.addInstance_ </td>
          <td>(</td>
          <td class="paramtype">final String&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Object&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds an instance to the <a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b">instances</a> map. </p>
<p>The name which will be mapped to the instance must not be equal to the keywords "out","err","args","em" or "emg".</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name which is to be mapped to the specified instance </td></tr>
    <tr><td class="paramname">obj</td><td>the instance to be associated with the specified name </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">                                                                   {
        <span class="keywordflow">if</span> (<span class="stringliteral">&quot;out&quot;</span>.equals(name) || <span class="stringliteral">&quot;err&quot;</span>.equals(name) || <span class="stringliteral">&quot;args&quot;</span>.equals(name) || <span class="stringliteral">&quot;em&quot;</span>.equals(name)
            || <span class="stringliteral">&quot;emg&quot;</span>.equals(name))
            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Reserved instance name&quot;</span>);

        <span class="keywordflow">if</span> (<a class="code" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b" title="stores several instances needed for the GNDMSystem">instances</a>.containsKey(name))
            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="stringliteral">&quot;Name clash in instance registration: &quot;</span> + name);
        <span class="keywordflow">else</span>
            <a class="code" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b" title="stores several instances needed for the GNDMSystem">instances</a>.put(name, obj);

        logger.debug(<span class="stringliteral">&quot;adding: &quot;</span> + name + <span class="charliteral">&#39;\&#39;&#39;</span>);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aa0ca003c94fd752c7f1dade875a5b882"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::createConfiglet" ref="aa0ca003c94fd752c7f1dade875a5b882" args="(final ConfigletState configParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized Configlet de.zib.gndms.infra.system.GNDMSystemDirectory.createConfiglet </td>
          <td>(</td>
          <td class="paramtype">final <a class="el" href="../../d1/d8c/classde_1_1zib_1_1gndms_1_1model_1_1common_1_1_configlet_state.html">ConfigletState</a>&#160;</td>
          <td class="paramname"><em>configParam</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a <code>Configlet</code> out of a ConfigletState. </p>
<p>The created instance uses <a class="el" href="../../">logger</a> as its <code>Logger</code> object. The name and state of the new Configlet is taken from <code>configParam</code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">configParam</td><td>A ConfigletState to be converted to a Configlet</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a Configlet out of a ConfigletState </dd></dl>
<div class="fragment"><pre class="fragment">                                                                                         {
                <span class="keywordflow">try</span> {
                        <span class="keyword">final</span> Class&lt;? extends Configlet&gt; clazz = Class.forName(configParam.getClassName()).asSubclass(Configlet.class);
                        <span class="keyword">final</span> Configlet instance = clazz.newInstance();
                        instance.init(logger, configParam.getName(), configParam.getState());
                        <span class="keywordflow">return</span> instance;
                }
                <span class="keywordflow">catch</span> (IllegalAccessException e) {
                        <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException(e);
                }
                <span class="keywordflow">catch</span> (InstantiationException e) {
                        <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException(e);
                }
                <span class="keywordflow">catch</span> (ClassNotFoundException e) {
                        <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException(e);
                }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aa9111f40b37ba912b65a77133a23ffcf"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::createOrUpdateConfiglets" ref="aa9111f40b37ba912b65a77133a23ffcf" args="(final ConfigletState[] statesParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized void de.zib.gndms.infra.system.GNDMSystemDirectory.createOrUpdateConfiglets </td>
          <td>(</td>
          <td class="paramtype">final <a class="el" href="../../d1/d8c/classde_1_1zib_1_1gndms_1_1model_1_1common_1_1_configlet_state.html">ConfigletState</a>[]&#160;</td>
          <td class="paramname"><em>statesParam</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Iterates through the <code>ConfigletState</code> array and either updates the <code>state</code> of the corresponding <code>Configlet</code>, if already stored in the <a class="el" href="../../">configlets</a> map, or creates a new <code>Configlet</code> using <a class="el" href="../../">createConfiglet(de.zib.gndms.model.common.ConfigletState)</a> and stores it together with the name of the Configlet in the map. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">statesParam</td><td>an array containing several ConfigletStates to be stored in the <code>configlets</code> map </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">                                                                                               {
                <span class="keywordflow">for</span> (ConfigletState configletState : statesParam) {
                        <span class="keyword">final</span> String name = configletState.getName();
                        <span class="keywordflow">if</span> (configlets.containsKey(name)) {
                                configlets.get(name).update(configletState.getState());
                        }
                        <span class="keywordflow">else</span> {
                                <span class="keyword">final</span> Configlet configlet = <a class="code" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#aa0ca003c94fd752c7f1dade875a5b882" title="Creates a Configlet out of a ConfigletState.">createConfiglet</a>(configletState);
                                configlets.put(name, configlet);
                        }
                }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="af9d216faf1c822254414ffe6ed9cefde"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::getConfiglet" ref="af9d216faf1c822254414ffe6ed9cefde" args="(final @NotNull Class&lt; T &gt; clazz, final @NotNull String name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public&lt;T extends Configlet&gt; T de.zib.gndms.infra.system.GNDMSystemDirectory.getConfiglet </td>
          <td>(</td>
          <td class="paramtype">final @NotNull Class&lt; T &gt;&#160;</td>
          <td class="paramname"><em>clazz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final @NotNull String&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [package]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieves the configlet stored with the key <code>name</code> from <a class="el" href="../../">configlets</a> map, casts it to a <code>T</code> class and returns it. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">clazz</td><td>the class the Configlet belongs to </td></tr>
    <tr><td class="paramname">name</td><td>the name of the Configlet </td></tr>
    <tr><td class="paramname">&lt;T&gt;</td><td>the class the instance will be casted to </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a casted configlet from the <code>configlets</code> map </dd></dl>
<div class="fragment"><pre class="fragment">                                                                                                               {
                <span class="keywordflow">return</span> clazz.cast(configlets.get(name));
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aadcef6725ccb81856e773b9ca3a69084"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::getInstance" ref="aadcef6725ccb81856e773b9ca3a69084" args="(@NotNull Class&lt;?extends T &gt; clazz,@NotNull String name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized&lt;T&gt; T de.zib.gndms.infra.system.GNDMSystemDirectory.getInstance </td>
          <td>(</td>
          <td class="paramtype">@NotNull Class&lt;?extends T &gt;&#160;</td>
          <td class="paramname"><em>clazz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">@NotNull String&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the instance, which has been registered on <a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b">instances</a> with the name <code>name</code>. </p>
<p>The instace will be casted to the parameter <code>T</code> of <code>clazz</code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">clazz</td><td>the class the instance belongs to </td></tr>
    <tr><td class="paramname">name</td><td>the name of the instance as denoted on the map <a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b">instances</a> </td></tr>
    <tr><td class="paramname">&lt;T&gt;</td><td>the class the instance will be casted to </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>an instance from the <code>instances</code> map </dd></dl>
<div class="fragment"><pre class="fragment">    {
        <span class="keyword">final</span> Object obj = <a class="code" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b" title="stores several instances needed for the GNDMSystem">instances</a>.get(name);
        <span class="keywordflow">if</span> (obj == null)
            <span class="keywordflow">throw</span> <span class="keyword">new</span>
                  IllegalStateException(<span class="stringliteral">&quot;Null instance retrieved or invalid or unregistered name&quot;</span>);
        <span class="keywordflow">return</span> clazz.cast(obj);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="acfaf27e672319e78e588b59e8c3bbea1"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::getSystemTempDirName" ref="acfaf27e672319e78e588b59e8c3bbea1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String de.zib.gndms.infra.system.GNDMSystemDirectory.getSystemTempDirName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the value set for the environment variable <code>GNDMS_TMP</code>. </p>
<p>If nothing denoted, it will return the value of the enviroment variable <code>TMPDIR</code> instead. If also not denoted, "/tmp" will be returned.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the temp directory of the <a class="el" href="../../da/d1d/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system.html" title="This sets up the configuration and database storage area shared between GNDMS services.">GNDMSystem</a> according to environment variables </dd></dl>
<div class="fragment"><pre class="fragment">                                             {
                String tmp = System.getenv(<span class="stringliteral">&quot;GNDMS_TMP&quot;</span>);
                tmp = tmp == null ?  <span class="stringliteral">&quot;&quot;</span>  : tmp.trim();
                <span class="keywordflow">if</span> (tmp.length() == 0) {
                        tmp = System.getenv(<span class="stringliteral">&quot;TMPDIR&quot;</span>);
                        tmp = tmp == null ?  <span class="stringliteral">&quot;&quot;</span>  : tmp.trim();
                }
                <span class="keywordflow">if</span> (tmp.length() == 0) {
                        tmp = <span class="stringliteral">&quot;/tmp&quot;</span>;
                }
                <span class="keywordflow">return</span> tmp;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a301cf44ee01fb0f1591cbb9d736da7de"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::loadConfigletStates" ref="a301cf44ee01fb0f1591cbb9d736da7de" args="(final EntityManager emParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized <a class="el" href="../../d1/d8c/classde_1_1zib_1_1gndms_1_1model_1_1common_1_1_configlet_state.html">ConfigletState</a> [] de.zib.gndms.infra.system.GNDMSystemDirectory.loadConfigletStates </td>
          <td>(</td>
          <td class="paramtype">final EntityManager&#160;</td>
          <td class="paramname"><em>emParam</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Loads all <code>ConfigletStates</code> managed by a specific <code>EntityManager</code> into an array. </p>
<p>Performs the query "listAllConfiglets" on the database and returns an array containing the result.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">emParam</td><td>an EntityManager managing ConfigletStates </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>an array containing all ConfigletStates of the database </dd></dl>
<div class="fragment"><pre class="fragment">                                                                                               {
                <span class="keyword">final</span> ConfigletState[] states;
                emParam.getTransaction().begin();
                <span class="keywordflow">try</span> {
                        Query query = emParam.createNamedQuery(<span class="stringliteral">&quot;listAllConfiglets&quot;</span>);
                        <span class="keyword">final</span> List&lt;ConfigletState&gt; list = (List&lt;ConfigletState&gt;) query.getResultList();
                        Object[] states_ = list.toArray();
                        states = <span class="keyword">new</span> ConfigletState[states_.length];
                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; states_.length; i++)
                                states[i] = (ConfigletState) states_[i];
                        <span class="keywordflow">return</span> states;
                }
                <span class="keywordflow">finally</span> {
                        <span class="keywordflow">if</span> (emParam.getTransaction().isActive())
                                emParam.getTransaction().commit();
                }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a884d362291751b676c7e09c31af216f1"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::reloadConfiglets" ref="a884d362291751b676c7e09c31af216f1" args="(final EntityManagerFactory emf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized void de.zib.gndms.infra.system.GNDMSystemDirectory.reloadConfiglets </td>
          <td>(</td>
          <td class="paramtype">final EntityManagerFactory&#160;</td>
          <td class="paramname"><em>emf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new EntityManager using <code>emf</code>. </p>
<p>Calls <a class="el" href="../../">loadConfigletStates(javax.persistence.EntityManager)</a> and <a class="el" href="../../">createOrUpdateConfiglets(de.zib.gndms.model.common.ConfigletState[])</a> to load all configlets managed by this EntityManager and update the <a class="el" href="../../">configlets</a> map. Old Configlets will be removed and shutted down using <a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a49182c22d433229da953d0d53aebba13">shutdownConfiglets()</a></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">emf</td><td>the factory the EntityManager will be created of </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">                                                                                  {
                ConfigletState[] states;
                EntityManager em = emf.createEntityManager();
                <span class="keywordflow">try</span> {
                        states = <a class="code" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a301cf44ee01fb0f1591cbb9d736da7de" title="Loads all ConfigletStates managed by a specific EntityManager into an array.">loadConfigletStates</a>(em);
                        <a class="code" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#aa9111f40b37ba912b65a77133a23ffcf" title="Iterates through the ConfigletState array and either updates the state of the corresponding Configlet...">createOrUpdateConfiglets</a>(states);
                        <a class="code" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a0af2e32c7905bb87d0942cc5722d3079" title="Removes old configlets from the configlets map.">shutdownOldConfiglets</a>(em);
                }
                <span class="keywordflow">finally</span> { <span class="keywordflow">if</span> (em.isOpen()) em.close(); }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a0af2e32c7905bb87d0942cc5722d3079"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::shutdownOldConfiglets" ref="a0af2e32c7905bb87d0942cc5722d3079" args="(final EntityManager emParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized void de.zib.gndms.infra.system.GNDMSystemDirectory.shutdownOldConfiglets </td>
          <td>(</td>
          <td class="paramtype">final EntityManager&#160;</td>
          <td class="paramname"><em>emParam</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes old configlets from the <a class="el" href="../../">configlets</a> map. </p>
<p>Checks for every <code>Configlet</code> in the map, if still exists in the database. If not, the map entry will be removed and <code>shutdown()</code> invoked on the old configlet entry.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">emParam</td><td>an EntityManager managing <code>Configlet</code>s </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">                                                                                     {
                Set&lt;String&gt; <span class="keyword">set</span> = configlets.keySet();
                Object[] keys = <span class="keyword">set</span>.toArray();
                <span class="keywordflow">for</span> (Object name : keys) {
                        emParam.getTransaction().begin();
                        <span class="keywordflow">try</span> {
                                <span class="keywordflow">if</span> (emParam.find(ConfigletState.class, name) == null) {
                                        Configlet let = configlets.get(name);
                                        configlets.remove(name);
                                        let.shutdown();
                                }
                        }
                        <span class="keywordflow">catch</span> (RuntimeException e) {
                                logger.warn( <span class="stringliteral">&quot;&quot;</span>, e);
                        }
                        <span class="keywordflow">finally</span> {
                                <span class="keywordflow">if</span> (emParam.getTransaction().isActive())
                                        emParam.getTransaction().commit();
                        }
                }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a09f09716d825315d19c0edb9b7fa086d"></a><!-- doxytag: member="de::zib::gndms::infra::system::GNDMSystemDirectory::waitForInstance" ref="a09f09716d825315d19c0edb9b7fa086d" args="(@NotNull Class&lt; T &gt; clazz,@NotNull String name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">&lt;T&gt; T de.zib.gndms.infra.system.GNDMSystemDirectory.waitForInstance </td>
          <td>(</td>
          <td class="paramtype">@NotNull Class&lt; T &gt;&#160;</td>
          <td class="paramname"><em>clazz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">@NotNull String&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Waits until an instance on <a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b">instances</a> with the key <code>name</code>, has been registered and returns it. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">clazz</td><td>the class the instance belongs to </td></tr>
    <tr><td class="paramname">name</td><td>the name of the instance as denoted on the map <a class="el" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#a9f582a59bdd5364e415a30d9c234b77b">instances</a> </td></tr>
    <tr><td class="paramname">&lt;T&gt;</td><td>the class the instance will be casted to </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>an instance from the <code>instances</code> map </dd></dl>
<div class="fragment"><pre class="fragment">                                                                                              {
        T instance;
        <span class="keywordflow">try</span> { instance = <a class="code" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#aadcef6725ccb81856e773b9ca3a69084" title="Returns the instance, which has been registered on instances with the name name.">getInstance</a>(clazz, name); }
        <span class="keywordflow">catch</span> (IllegalStateException e) { instance = null; }
        <span class="keywordflow">while</span> (instance != null) {
            <span class="keywordflow">try</span> {
                Thread.sleep(INSTANCE_RETRIEVAL_INTERVAL);
            }
            <span class="keywordflow">catch</span> (InterruptedException e) {
                <span class="comment">// intended</span>
            }
            <span class="keywordflow">try</span> { instance = <a class="code" href="../../d5/d35/classde_1_1zib_1_1gndms_1_1infra_1_1system_1_1_g_n_d_m_system_directory.html#aadcef6725ccb81856e773b9ca3a69084" title="Returns the instance, which has been registered on instances with the name name.">getInstance</a>(clazz, name); }
            <span class="keywordflow">catch</span> (IllegalStateException e) { instance = null; }
        }
        <span class="keywordflow">return</span> instance;
    }
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>infra/src/de/zib/gndms/infra/system/GNDMSystemDirectory.java</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Feb 15 2012 15:07:01 for GNDMS by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
