<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>GNDMS: de.zib.gndms.taskflows.filetransfer.server.network.GNDMSFileTransfer Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../gndms-logo-150x120.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">GNDMS&#160;<span id="projectnumber">0.6.0</span></div>
   <div id="projectbrief">RESTful verison of GNDMS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>de</b>      </li>
      <li class="navelem"><b>zib</b>      </li>
      <li class="navelem"><b>gndms</b>      </li>
      <li class="navelem"><a class="el" href="../../d4/d37/namespacede_1_1zib_1_1gndms_1_1taskflows.html">taskflows</a>      </li>
      <li class="navelem"><b>filetransfer</b>      </li>
      <li class="navelem"><b>server</b>      </li>
      <li class="navelem"><b>network</b>      </li>
      <li class="navelem"><a class="el" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html">GNDMSFileTransfer</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<h1>de.zib.gndms.taskflows.filetransfer.server.network.GNDMSFileTransfer Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer" -->
<p><a href="../../d8/dc4/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ca38e55671d24359b348f2517efe859"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::getBufferSize" ref="a6ca38e55671d24359b348f2517efe859" args="()" -->
Integer&#160;</td><td class="memItemRight" valign="bottom"><b>getBufferSize</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac167020a74e6002f5f2fa41ca6cf9b46"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::setBufferSize" ref="ac167020a74e6002f5f2fa41ca6cf9b46" args="(Integer bufferSize)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setBufferSize</b> (Integer bufferSize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#a5346e98ff8b473477ec53e0afd205978">setFiles</a> (Map&lt; String, String &gt; fm)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares the transfer of a list of files.  <a href="#a5346e98ff8b473477ec53e0afd205978"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4d93c852ac5c8a110bb8060253a724d0"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::setFiles" ref="a4d93c852ac5c8a110bb8060253a724d0" args="(String sfn, String tfn)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#a4d93c852ac5c8a110bb8060253a724d0">setFiles</a> (String sfn, String tfn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is provided for convenience and behaves like the above method. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adbdb2f8b880a7c93786eeef229d2fc67"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::getFiles" ref="adbdb2f8b880a7c93786eeef229d2fc67" args="()" -->
Map&lt; String, String &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>getFiles</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#a34f465cc5f61447387c8493d719c53fc">prepareTransfer</a> ()  throws ServerException, IOException, ClientException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method can be called before the actual transfer is performed.  <a href="#a34f465cc5f61447387c8493d719c53fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a829d277562b84cb3f14d62aa2b680243"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::makeFileFilter" ref="a829d277562b84cb3f14d62aa2b680243" args="()" -->
Pattern&#160;</td><td class="memItemRight" valign="bottom"><b>makeFileFilter</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#afba5016d61a23175af0bb0b4e6a81f6a">estimateTransferSize</a> ()  throws IOException, ServerException, ClientException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimates the size of a prepared download or transfer.  <a href="#afba5016d61a23175af0bb0b4e6a81f6a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#a71ccbc49dcb8cfd1c26f21b99ce31547">performTransfer</a> (MarkerListener list)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs the prepared transfer.  <a href="#a71ccbc49dcb8cfd1c26f21b99ce31547"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#a4f71f28f8abfb3c32ed60dd296412785">performPersistentTransfer</a> (@NotNull <a class="el" href="../../d5/d2f/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_persistent_marker_listener.html">PersistentMarkerListener</a> markerListener)  throws ServerException, IOException, ClientException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs the prepared transfer using a persistent marker listener.  <a href="#a4f71f28f8abfb3c32ed60dd296412785"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#a23b9a4a246b851a4f1f7acb3f54900b5">setClients</a> (GridFTPClient sclnt, GridFTPClient tclnt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the source and target clients for a third party transfer.  <a href="#a23b9a4a246b851a4f1f7acb3f54900b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abd7a4e5920fda3aa5568fa81dc44e60f"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::getSourceClient" ref="abd7a4e5920fda3aa5568fa81dc44e60f" args="()" -->
GridFTPClient&#160;</td><td class="memItemRight" valign="bottom"><b>getSourceClient</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ada30af67761c46d79dbfb2462e75ddf9"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::setSourceClient" ref="ada30af67761c46d79dbfb2462e75ddf9" args="(GridFTPClient sourceClient)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setSourceClient</b> (GridFTPClient sourceClient)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a225cac31c01f3c31307a31ee5a4315b7"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::getTargetClient" ref="a225cac31c01f3c31307a31ee5a4315b7" args="()" -->
GridFTPClient&#160;</td><td class="memItemRight" valign="bottom"><b>getTargetClient</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f07fc36a1c1ecb0ba045d97035359da"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::setDestinationClient" ref="a8f07fc36a1c1ecb0ba045d97035359da" args="(GridFTPClient destinationClient)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setDestinationClient</b> (GridFTPClient destinationClient)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a416448934d6c39a4373ccf92e3c78005"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::getSourcePath" ref="a416448934d6c39a4373ccf92e3c78005" args="()" -->
String&#160;</td><td class="memItemRight" valign="bottom"><b>getSourcePath</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0366f70722214af5b632b69431e1aed0"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::setSourcePath" ref="a0366f70722214af5b632b69431e1aed0" args="(String sourcePath)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setSourcePath</b> (String sourcePath)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6e607f7bcf0f7e466bde6efe56fd4b58"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::getDestinationPath" ref="a6e607f7bcf0f7e466bde6efe56fd4b58" args="()" -->
String&#160;</td><td class="memItemRight" valign="bottom"><b>getDestinationPath</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afb48700cf8611ec958339ac738754338"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::setDestinationPath" ref="afb48700cf8611ec958339ac738754338" args="(String destinationPath)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setDestinationPath</b> (String destinationPath)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a832d10f8df8e663bda3d611c5012f004"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::ELLIPSE" ref="a832d10f8df8e663bda3d611c5012f004" args="" -->
static final String&#160;</td><td class="memItemRight" valign="bottom"><b>ELLIPSE</b> = Pattern.quote( &quot;...&quot; )</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a098874a97916f0a87e4ca9b8f2a844cc"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::setupClient" ref="a098874a97916f0a87e4ca9b8f2a844cc" args="(GridFTPClient cnt)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setupClient</b> (GridFTPClient cnt)  throws ServerException, IOException </td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a99dc0056a5c1c2b559b563df4d6e8178"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::logger" ref="a99dc0056a5c1c2b559b563df4d6e8178" args="" -->
final Logger&#160;</td><td class="memItemRight" valign="bottom"><b>logger</b> = LoggerFactory.getLogger( this.getClass() )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af7da0af23a4dd31a130aed5904732071"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::ellipse" ref="af7da0af23a4dd31a130aed5904732071" args="" -->
final Pattern&#160;</td><td class="memItemRight" valign="bottom"><b>ellipse</b> = Pattern.compile( &quot;(.*)&quot;+ ELLIPSE + &quot;$&quot; )</td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abdf7ffa3f5bec0d1bafb2fb17deba6f9"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::hasEllipse" ref="abdf7ffa3f5bec0d1bafb2fb17deba6f9" args="(Map&lt; String, String &gt; files)" -->
boolean&#160;</td><td class="memItemRight" valign="bottom"><b>hasEllipse</b> (Map&lt; String, String &gt; files)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaff646d4aad15cdff1aa51558280b7eb"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::resumeSource" ref="aaff646d4aad15cdff1aa51558280b7eb" args="(FTPTransferState stat)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#aaff646d4aad15cdff1aa51558280b7eb">resumeSource</a> (<a class="el" href="../../d2/d50/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1model_1_1_f_t_p_transfer_state.html">FTPTransferState</a> stat)  throws ServerException, IOException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This loads the ftp byte range args from a FTPTransferState object into a GridFTPClient. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec388c63202cf14a0f412ef04ec72c5e"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::fetchFileListing" ref="aec388c63202cf14a0f412ef04ec72c5e" args="(Pattern pattern)" -->
Map&lt; String, String &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>fetchFileListing</b> (Pattern pattern)  throws ClientException, ServerException, IOException </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a25a573396302e14975c750ac8da91c38"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::enrichExceptionMsg" ref="a25a573396302e14975c750ac8da91c38" args="(String msg)" -->
String&#160;</td><td class="memItemRight" valign="bottom"><b>enrichExceptionMsg</b> (String msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a174d0ef7db1ad87c5ca1efdfdff25d69"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::enrichExceptionMsg" ref="a174d0ef7db1ad87c5ca1efdfdff25d69" args="(String msg, String fn)" -->
String&#160;</td><td class="memItemRight" valign="bottom"><b>enrichExceptionMsg</b> (String msg, String fn)</td></tr>
<tr><td colspan="2"><h2><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a47446f2f9e6778a37c57f8d2eff131de"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::printWithNull" ref="a47446f2f9e6778a37c57f8d2eff131de" args="(String o)" -->
static String&#160;</td><td class="memItemRight" valign="bottom"><b>printWithNull</b> (String o)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6238d2986aba3d1212d0deb4939cde38"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::printWithNull" ref="a6238d2986aba3d1212d0deb4939cde38" args="(GridFTPClient o)" -->
static String&#160;</td><td class="memItemRight" valign="bottom"><b>printWithNull</b> (GridFTPClient o)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f34b52ae51bf30263e8c800d9984adb"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::sourceClient" ref="a8f34b52ae51bf30263e8c800d9984adb" args="" -->
GridFTPClient&#160;</td><td class="memItemRight" valign="bottom"><b>sourceClient</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeda8d52c28457441539139740794880a"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::destinationClient" ref="aeda8d52c28457441539139740794880a" args="" -->
GridFTPClient&#160;</td><td class="memItemRight" valign="bottom"><b>destinationClient</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37339be18cba99b2753ecf949e14d273"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::files" ref="a37339be18cba99b2753ecf949e14d273" args="" -->
Map&lt; String, String &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>files</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a12bc0066c3fee7b73e100485e2f93fbc"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::sourcePath" ref="a12bc0066c3fee7b73e100485e2f93fbc" args="" -->
String&#160;</td><td class="memItemRight" valign="bottom"><b>sourcePath</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8aa58104dcc1231435ad864127b8c406"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::destinationPath" ref="a8aa58104dcc1231435ad864127b8c406" args="" -->
String&#160;</td><td class="memItemRight" valign="bottom"><b>destinationPath</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a258c3995e3c77a051627e0ed0acc04cd"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::bufferSize" ref="a258c3995e3c77a051627e0ed0acc04cd" args="" -->
Integer&#160;</td><td class="memItemRight" valign="bottom"><b>bufferSize</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><dl class="author"><dt><b>Author:</b></dt><dd>try ma ik jo rr a zib </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>$Id$ </dd></dl>
<p>User: mjorra, Date: 30.09.2008, Time: 13:02:37 </p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="afba5016d61a23175af0bb0b4e6a81f6a"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::estimateTransferSize" ref="afba5016d61a23175af0bb0b4e6a81f6a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long de.zib.gndms.taskflows.filetransfer.server.network.GNDMSFileTransfer.estimateTransferSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>  throws IOException, ServerException, ClientException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Estimates the size of a prepared download or transfer. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The size in byte. </dd></dl>
<div class="fragment"><pre class="fragment">                                                                                             {

        String lastFileName = null; <span class="comment">// required for nice exceptions names</span>
        <span class="keywordflow">try</span> {
            <a class="code" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#a34f465cc5f61447387c8493d719c53fc" title="This method can be called before the actual transfer is performed.">prepareTransfer</a>( );

            sourceClient.setType( Session.TYPE_ASCII );

            Set&lt;String&gt; src = files.keySet();
            <span class="keywordtype">long</span> size = 0;

            <span class="keywordflow">for</span> ( String aSrc : src ) {
                <span class="comment">// todo evaluate usage of msld command</span>
                lastFileName = aSrc;
                size += sourceClient.getSize( lastFileName );
            }

            <span class="keywordflow">return</span> size;
        } <span class="keywordflow">catch</span> ( ServerException ex ) {
            ex.setCustomMessage( enrichExceptionMsg( ex.getMessage(), lastFileName ) );
            <span class="keywordflow">throw</span> ex;
        } <span class="keywordflow">catch</span> ( ClientException ex ) {
            ex.setCustomMessage( enrichExceptionMsg( ex.getMessage(), lastFileName ) );
            <span class="keywordflow">throw</span> ex;
        } <span class="keywordflow">catch</span> ( IOException ex ) {
            IOException ioe = <span class="keyword">new</span> IOException( enrichExceptionMsg( ex.getMessage(), lastFileName ) );
            ioe.setStackTrace( ex.getStackTrace() );
            <span class="keywordflow">throw</span> ioe;
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a4f71f28f8abfb3c32ed60dd296412785"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::performPersistentTransfer" ref="a4f71f28f8abfb3c32ed60dd296412785" args="(@NotNull PersistentMarkerListener markerListener)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void de.zib.gndms.taskflows.filetransfer.server.network.GNDMSFileTransfer.performPersistentTransfer </td>
          <td>(</td>
          <td class="paramtype">@NotNull <a class="el" href="../../d5/d2f/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_persistent_marker_listener.html">PersistentMarkerListener</a>&#160;</td>
          <td class="paramname"><em>markerListener</em></td><td>)</td>
          <td>  throws ServerException, IOException, ClientException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs the prepared transfer using a persistent marker listener. </p>
<p>If the listener has a state, i.e. a currentFile and a range, then the transfer will uses this state to continue the transfer. </p>
<div class="fragment"><pre class="fragment">                                                                                                                                                   {

        String currentFile = null;
        <span class="keywordflow">try</span> {
            <a class="code" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#a34f465cc5f61447387c8493d719c53fc" title="This method can be called before the actual transfer is performed.">prepareTransfer</a>( );

            <span class="keywordflow">if</span>( destinationClient == null || files == null )
                <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalStateException( );

            setupClient ( sourceClient );

            setupClient ( destinationClient );
            destinationClient.changeDir( destinationPath );

            sourceClient.setActive( destinationClient.setPassive() );

            <span class="keywordtype">boolean</span> resume = markerListener.hasCurrentFile();
            String  resumeFile = markerListener.getCurrentFile();

            <span class="keywordflow">for</span>( String fn : files.keySet() ) {
                currentFile = fn;

                <span class="comment">// if transfer is resumed skip files til last transferred file is found.</span>
                <span class="keywordflow">if</span>( resume &amp;&amp; currentFile.equals( resumeFile ) ) {
                    resume = <span class="keyword">false</span>;
                    <a class="code" href="../../dc/d4a/classde_1_1zib_1_1gndms_1_1taskflows_1_1filetransfer_1_1server_1_1network_1_1_g_n_d_m_s_file_transfer.html#aaff646d4aad15cdff1aa51558280b7eb" title="This loads the ftp byte range args from a FTPTransferState object into a GridFTPClient.">resumeSource</a>( markerListener.getTransferState() );
                }

                <span class="keywordflow">if</span>( !resume ) {
                    markerListener.setCurrentFile( currentFile );
                    String destinationFile = files.get( currentFile );
                    sourceClient.extendedTransfer( currentFile, destinationClient,
                        ( destinationFile == null ? currentFile : destinationFile ), markerListener );
                }
            }
        } <span class="keywordflow">catch</span> ( ServerException ex ) {
            ex.setCustomMessage( enrichExceptionMsg( ex.getMessage(), currentFile ) );
            <span class="keywordflow">throw</span> ex;
        } <span class="keywordflow">catch</span> ( ClientException ex ) {
            ex.setCustomMessage( enrichExceptionMsg( ex.getMessage(), currentFile ) );
            <span class="keywordflow">throw</span> ex;
        } <span class="keywordflow">catch</span> ( IOException ex ) {
            IOException ioe = <span class="keyword">new</span> IOException( enrichExceptionMsg( ex.getMessage(), currentFile ) );
            ioe.setStackTrace( ex.getStackTrace() );
            <span class="keywordflow">throw</span> ioe;
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a71ccbc49dcb8cfd1c26f21b99ce31547"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::performTransfer" ref="a71ccbc49dcb8cfd1c26f21b99ce31547" args="(MarkerListener list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void de.zib.gndms.taskflows.filetransfer.server.network.GNDMSFileTransfer.performTransfer </td>
          <td>(</td>
          <td class="paramtype">MarkerListener&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs the prepared transfer. </p>
<p>NOTE: not implemented yet. </p>
<div class="fragment"><pre class="fragment">                                                       {

    }
</pre></div>
</div>
</div>
<a class="anchor" id="a34f465cc5f61447387c8493d719c53fc"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::prepareTransfer" ref="a34f465cc5f61447387c8493d719c53fc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void de.zib.gndms.taskflows.filetransfer.server.network.GNDMSFileTransfer.prepareTransfer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>  throws ServerException, IOException, ClientException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method can be called before the actual transfer is performed. </p>
<p>It ensures that the file set isn't empty. If it is empty the file listing will be requested from the source client.</p>
<p>This is useful if one would like to see the file listing befor the transfer starts. </p>
<div class="fragment"><pre class="fragment">                                                                                        {

        <span class="keywordflow">if</span>( sourceClient == null )
            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalStateException( enrichExceptionMsg( <span class="stringliteral">&quot;no source client provided&quot;</span> ) );

        <span class="keywordflow">try</span> {
            <span class="keywordflow">if</span>( sourcePath != null )
                sourceClient.changeDir( sourcePath );

            <span class="keywordflow">if</span>( files == null || files.size( ) == 0 )
                files = fetchFileListing( null );
            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( hasEllipse( files ) ) {
                logger.debug( <span class="stringliteral">&quot;Ellipse detected, using awesome new feature.&quot;</span> );
                files = fetchFileListing( makeFileFilter() );
            }
        } <span class="keywordflow">catch</span> ( ServerException ex ) {
            ex.setCustomMessage( enrichExceptionMsg( ex.getMessage() ) );
            <span class="keywordflow">throw</span> ex;
        } <span class="keywordflow">catch</span> ( ClientException ex ) {
            ex.setCustomMessage( enrichExceptionMsg( ex.getMessage() ) );
            <span class="keywordflow">throw</span> ex;
        } <span class="keywordflow">catch</span> ( IOException ex ) {
            IOException ioe = <span class="keyword">new</span> IOException( enrichExceptionMsg( ex.getMessage() ) );
            ioe.setStackTrace( ex.getStackTrace() );
            <span class="keywordflow">throw</span> ioe;
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a23b9a4a246b851a4f1f7acb3f54900b5"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::setClients" ref="a23b9a4a246b851a4f1f7acb3f54900b5" args="(GridFTPClient sclnt, GridFTPClient tclnt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void de.zib.gndms.taskflows.filetransfer.server.network.GNDMSFileTransfer.setClients </td>
          <td>(</td>
          <td class="paramtype">GridFTPClient&#160;</td>
          <td class="paramname"><em>sclnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GridFTPClient&#160;</td>
          <td class="paramname"><em>tclnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the source and target clients for a third party transfer. </p>
<p>The clients will be configured according to their desired roles, before any ftp action takes place. So don't change them after calling this method.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sclnt</td><td>the source client. </td></tr>
    <tr><td class="paramname">tclnt</td><td>the target client. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">                                                                        {

        setSourceClient( sclnt );
        setDestinationClient( tclnt );
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5346e98ff8b473477ec53e0afd205978"></a><!-- doxytag: member="de::zib::gndms::taskflows::filetransfer::server::network::GNDMSFileTransfer::setFiles" ref="a5346e98ff8b473477ec53e0afd205978" args="(Map&lt; String, String &gt; fm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void de.zib.gndms.taskflows.filetransfer.server.network.GNDMSFileTransfer.setFiles </td>
          <td>(</td>
          <td class="paramtype">Map&lt; String, String &gt;&#160;</td>
          <td class="paramname"><em>fm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prepares the transfer of a list of files. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fm</td><td>The given map consists of pairs of source and target file names. The target file name may be null, if it should be identical to the source files name.</td></tr>
  </table>
  </dd>
</dl>
<p>This resets any previously prepared download stats. </p>
<div class="fragment"><pre class="fragment">                                                   {
        files = fm;
    }
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>taskflows/fileTransfer/server/src/de/zib/gndms/taskflows/filetransfer/server/network/GNDMSFileTransfer.java</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Feb 15 2012 15:07:03 for GNDMS by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
