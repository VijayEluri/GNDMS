<project name="typecon compilation file" default="typecon.compile" basedir="." >
	
	<path id="typecon.path">
		<fileset dir="${lib.dir}" includes="*.jar"/>
		<fileset dir="${tools-lib.dir}" includes="*.jar" />
		<fileset refid="globus.lib"/>
		<dirset dir="${model.dest}/production/" />
		<dirset dir="services/GORFX/build/stubs-GORFX/classes/" />
	</path>
	<!-- Compile typecon, but not its test-files -->
	<target name="typecon.compile" description="Compiles typecon">
		<mkdir dir="./${typecon.dest}/production"/>
		<javac srcdir='${typecon.dir}/src' destdir='${typecon.dest}/production' classpathref="typecon.path" includes="**/type/*.java"/>
		<!-- Copy Meta files to build dir-->
		<copy todir="${typecon.dest}/production/" >
			<fileset dir="${typecon.dir}/src">
				<exclude name="de/**"/>
			</fileset>
		</copy>	
	</target>
	
	<!-- Compile typecon and its test-files -->
	<target name="typecon.compile.all" depends="typecon.compile" description="Compiles typecon and its test-files">
		<mkdir dir="./${typecon.dest}/test"/>
		<javac srcdir='${typecon.dir}/test-src' destdir='${typecon.dest}/test' classpathref="typecon.path" includes="**/type/*.java"/>
		<!-- Copy Meta files to build dir-->
		<copy todir="${typecon.dest}/test/" >
			<fileset dir="${typecon.dir}/test-src">
				<exclude name="de/**"/>
			</fileset>
		</copy>	
	</target>
	
	<!-- Creates jar-file of typecon binaries -->
	<target name="typecon.jar" depends="typecon.compile.all" description="Creates jar file gndms-typecon.jar in 'extra/lib'">	
		<jar destfile="./${lib.dir}/gndms-typecon.jar"
		     basedir="${typecon.dest}/production">
		</jar>
		
	</target>
	<!-- Deletes binaries and jar-files -->
	<target name="typecon.clean" description="Deletes typecon's binaries and jar-file">
		<delete includeemptydirs="true" >
			<fileset dir='${typecon.dest}/production' includes="**/*.class"/>
			<fileset dir='${typecon.dest}/test' includes="**/*.class"/>
		</delete>
	</target>
</project>